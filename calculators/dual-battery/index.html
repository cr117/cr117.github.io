<!DOCTYPE html>
<html lang="en-US">
<head>

	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<meta name="robots" content="noindex,follow">

	<title>Dual Battery Calculator</title>
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<style>
		
	</style>

</head>
<body>
	
	<div id="page">
		
	</div>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

	<script>

		var numberMin = 1;
		var numberMax = 10;

		var currentNumber = null;
		var pastNumbers = [];

		function setCookie(name, value, days) {
			var expires = "";
			if (days) {
				var date = new Date();
				date.setTime(date.getTime() + (days*24*60*60*1000));
				expires = "; expires=" + date.toUTCString();
			}
			document.cookie = name + "=" + (value || "")  + expires + "; path=/";
		}
		function getCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for(var i=0;i < ca.length;i++) {
				var c = ca[i];
				while (c.charAt(0)==' ') c = c.substring(1,c.length);
				if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
			}
			return null;
		}

		$(document).ready(function() {

			var savedNumberMin = getCookie('csbc_number_min');
			var savedNumberMax = getCookie('csbc_number_max');

			if(savedNumberMin !== null) numberMin = parseInt(savedNumberMin);
			if(savedNumberMax !== null) numberMax = parseInt(savedNumberMax);

			setCookie('csbc_number_min', numberMin, 30);
			setCookie('csbc_number_max', numberMax, 30);

			for(var i = 0; i <= 200; i++) {
				$('#settings-form select[name=min]').append('<option value="' + i + '">' + i + '</option>');
				$('#settings-form select[name=max]').append('<option value="' + i + '">' + i + '</option>');
			}

			$('#settings-form select[name=min]').val(numberMin);
			$('#settings-form select[name=max]').val(numberMax);

			$('#settings-form select').on('change', function(e) { $(this).closest('form').trigger('submit'); });

			$('#settings-form').on('submit', function(e) {
				e.preventDefault();
				var form = $(this);
				numberMin = parseInt($('select[name=min]', form).val());
				numberMax = parseInt($('select[name=max]', form).val());
				setCookie('csbc_number_min', numberMin, 30);
				setCookie('csbc_number_max', numberMax, 30);
				console.log(numberMin, numberMax);
				return false;
			});

			$('#generate-btn').on('click', function(e) {
				var duration = 20;
				var rate = 50;
				$('#number').addClass('generating');
				for(var i = 0; i < duration; i++) {
					setTimeout(function() { $('#number').text(generateRandomNumber(numberMin, numberMax)); }, i * rate);
				}
				setTimeout(function() {
					currentNumber = generateRandomNumber(numberMin, numberMax);
					$('#number').text(currentNumber).removeClass('generating');
					$('#number-container').addClass('flash');
					setTimeout(function() { $('#number-container').removeClass('flash'); }, 10);
					pastNumbers.push(number);
					$('#past-numbers .number.current').removeClass('current');
					$('#past-numbers').prepend('<span class="number current">' + currentNumber + '</span>');
				}, duration * rate);
			});

		});

		function generateRandomNumber(min, max) {
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}

	</script>

</body>
</html>